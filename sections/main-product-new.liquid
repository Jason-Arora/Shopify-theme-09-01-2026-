
{%- assign shipping_estimator_block = section.blocks | where: 'type', 'shipping_estimator' | first -%}
{%- assign variant_selector_block = section.blocks | where: 'type', 'variant_selector' | first -%}
{%- assign buy_buttons_block = section.blocks | where: 'type', 'buy_buttons' | first -%}

{%- capture section_settings -%}
{
  "showShippingEstimator": {% if template == 'product.quick-view' or product.available == false or shipping_estimator_block == blank %}false{% else %}true{% endif %},
  "showQuantitySelector": {{ variant_selector_block.settings.show_quantity_selector | json }},
  "showPaymentButton": {% if product.template_suffix == 'pre-order' %}false{% else %}{{ buy_buttons_block.settings.show_payment_button | json }}{% endif %},
  "showInventoryQuantity": {% if product.template_suffix != 'pre-order' %}{{ variant_selector_block.settings.show_inventory_quantity | json }}{% else %}false{% endif %},
  "lowInventoryThreshold": {{ variant_selector_block.settings.low_inventory_threshold | json }},
  "galleryTransitionEffect": {{ section.settings.carousel_effect | json }},
  "enableImageZoom": {% if template == 'product.quick-view' %}false{% else %}{{ section.settings.enable_image_zoom | json }}{% endif %},
  "zoomEffect": {{ section.settings.zoom_effect | json }},
  "enableVideoLooping": {{ section.settings.enable_video_looping | json }},
  "productOptions": {{ product.options | json | escape }},
  "enableHistoryState": {% if template == 'product.quick-view' %}false{% else %}true{% endif %},
  "infoOverflowScroll": {% if template == 'product.quick-view' %}false{% else %}true{% endif %},
  "isQuickView": {% if template == 'product.quick-view' %}true{% else %}false{% endif %}
}
{%- endcapture -%}

<section data-section-id="{{ section.id }}" data-section-type="product" data-section-settings='{{ section_settings }}'>
  {%- if template != 'product.quick-view' -%}
    <div class="container container--flush">
      <div class="page__sub-header">
        <nav aria-label="{{ 'general.breadcrumb.title' | t }}" class="breadcrumb">
          <ol class="breadcrumb__list" role="list">
            <li class="breadcrumb__item">
              <a class="breadcrumb__link link" href="{{ routes.root_url }}">{{ 'general.breadcrumb.home' | t }}</a> {%- render 'icon', icon: 'arrow-right' -%}
            </li>

            <li class="breadcrumb__item">
              {%- if collection -%}
                <a class="breadcrumb__link link" href="{{ collection.url }}">{{ collection.title }}</a> {%- render 'icon', icon: 'arrow-right' -%}
              {%- else -%}
                <a class="breadcrumb__link link" href="{{ routes.all_products_collection_url }}">{{- 'collection.general.all_products' | t -}}</a> {%- render 'icon', icon: 'arrow-right' -%}
              {%- endif -%}
            </li>

            <li class="breadcrumb__item">
              <span class="breadcrumb__link" aria-current="page">{{ product.title | truncate: 40 }}</span>
            </li>
          </ol>
        </nav>

        {%- if collection.previous_product or collection.next_product -%}
          <div class="page__navigation">
            {%- if collection.previous_product -%}
              <span class="page__navigation-item page__navigation-item--prev">
                <a href="{{ collection.previous_product.url }}" class="link" rel="prev">{%- render 'icon', icon: 'arrow-left' -%} {{- 'product.general.previous_product' | t -}}</a>
              </span>
            {%- endif -%}

            {%- if collection.next_product -%}
              <span class="page__navigation-item page__navigation-item--next">
                <a href="{{ collection.next_product.url }}" class="link" rel="next">{{- 'product.general.next_product' | t -}} {%- render 'icon', icon: 'arrow-right' -%}</a>
              </span>
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>

      <div class="product-block-list product-block-list--{{ section.settings.image_size }}">
        <div class="product-block-list__wrapper">
          {%- if product.media.size > 0 -%}
            <div class="product-block-list__item product-block-list__item--gallery">
              {% render 'product-gallery-vertical' %}
            </div>
          {%- endif -%}

          <div class="product-block-list__item product-block-list__item--info">
            {%- render 'product-info-new' -%}
          </div>

          {%- for block in section.blocks -%}

            {%- case block.type -%}
              {%- comment -%}
              --------------------------------------------------------------------------------------
              DESCRIPTION
              --------------------------------------------------------------------------------------
              {%- endcomment -%}

              {%- when 'description' -%}
  {%- if product.description != blank -%}
    <div class="product-block-list__item product-block-list__item--description" {{ block.shopify_attributes }}>
      <div class="card">
        {%- if block.settings.display_mode == 'collapse' -%}
          <button class="card__collapsible-button" data-action="toggle-collapsible" aria-expanded="false" aria-controls="block-{{ section.id }}-{{ block.id }}">
            {%- comment -%}<span class="card__title heading h3">{{ 'product.general.description' | t }}</span>{%- endcomment -%}
            <span class="plus-button plus-button--large"></span>
          </button>

          <div id="block-{{ section.id }}-{{ block.id }}" class="card__collapsible">
            <div class="card__collapsible-content">
              <div class="rte text--pull">
                {%- if product.description != blank -%}
                  {{ product.description | remove: 'data-section-type="product"' }}
                {%- endif -%}
                
                

                
              </div>
            </div>
          </div>

        {%- else -%}
          <div class="card__header">
            {%- comment -%}<h2 class="card__title heading h3">{{ 'product.general.description' | t }}</h2>{%- endcomment -%}
          </div>

          <div class="card__section {% if block.settings.display_mode == 'view_more' %}expandable-content{% endif %}" {% if block.settings.display_mode == 'view_more' %}aria-expanded="false"{% endif %}>
            <div class="rte text--pull">
              {%- if product.description != blank -%}
                <div class="rte text--pull" >
                  {{ product.description | remove: 'data-section-type="product"' }}
                </div>
              {%- endif -%}
              
              

              
            </div>


            {%- if block.settings.display_mode == 'view_more' -%}
              <button class="expandable-content__toggle">
                <span class="expandable-content__toggle-icon"></span>
                <span class="expandable-content__toggle-text" data-view-more="{{ 'product.general.view_more' | t | escape }}" data-view-less="{{ 'product.general.view_less' | t | escape }}">{{- 'product.general.view_more' | t -}}</span>
              </button>
            {%- endif -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  {%- endif -%}



              {%- when 'content' -%}
              
                {%- comment -%}
                --------------------------------------------------------------------------------------
                CONTENT (we first check the page and then inline content)
                --------------------------------------------------------------------------------------
                {%- endcomment -%}

                {%- assign page = block.settings.page -%}

                {%- if page != blank -%}
                  {%- assign title = page.title -%}
                  {%- assign content = page.content -%}
                {%- else -%}
                  {%- assign title = block.settings.title -%}
                  {%- assign content = block.settings.content -%}
                {%- endif -%}

                {%- if title != blank and content != blank -%}
                  <div class="product-block-list__item product-block-list__item--content" {{ block.shopify_attributes }}>
                    
                    <div class="card">
                      {%- if block.settings.display_mode == 'collapse' -%}
                        <button class="card__collapsible-button" data-action="toggle-collapsible" aria-expanded="false" aria-controls="block-{{ section.id }}-{{ block.id }}">
                          <span class="card__title heading h3">{{ title }}</span>
                          <span class="plus-button plus-button--large"></span>
                        </button>

                        <div id="block-{{ section.id }}-{{ block.id }}" class="card__collapsible">
                          <div class="card__collapsible-content">
                            <div class="rte text--pull">
                              {{ content }}
                            </div>
                          </div>
                        </div>
                      {%- else -%}
                        <div class="card__header">
                          <h2 class="card__title heading h3">{{ title }}</h2>
                        </div>

                        <div class="card__section {% if block.settings.display_mode == 'view_more' %}expandable-content{% endif %}" {% if block.settings.display_mode == 'view_more' %}aria-expanded="false"{% endif %}>
                          <div class="rte text--pull">
                            {{ content }}
                          </div>

                          {%- if block.settings.display_mode == 'view_more' -%}
                            <button class="expandable-content__toggle">
                              <span class="expandable-content__toggle-icon"></span>
                              <span class="expandable-content__toggle-text" data-view-more="{{ 'product.general.view_more' | t | escape }}" data-view-less="{{ 'product.general.view_less' | t | escape }}">{{- 'product.general.view_more' | t -}}</span>
                            </button>
                          {%- endif -%}
                        </div>
                      {%- endif -%}
                    </div>
                  </div>
                {%- endif -%}

            {%- when 'liquid' -%}
              {%- comment -%}
              --------------------------------------------------------------------------------------
              LIQUID COE
              --------------------------------------------------------------------------------------
              {%- endcomment -%}

              {%- assign title = block.settings.title -%}
              {%- assign liquid = block.settings.liquid -%}

              {%- if title != blank and liquid != blank -%}
                <div class="product-block-list__item product-block-list__item--content" {{ block.shopify_attributes }}>
                  <div class="card">
                    {%- if block.settings.display_mode == 'collapse' -%}
                      <button class="card__collapsible-button" data-action="toggle-collapsible" aria-expanded="false" aria-controls="block-{{ section.id }}-{{ block.id }}">
                        <span class="card__title heading h3">{{ title }}</span>
                        <span class="plus-button plus-button--large"></span>
                      </button>

                      <div id="block-{{ section.id }}-{{ block.id }}" class="card__collapsible">
                        <div class="card__collapsible-content">
                          <div class="rte text--pull">
                            {{ liquid }}
                          </div>
                        </div>
                      </div>
                    {%- else -%}
                      <div class="card__header">
                        <h2 class="card__title heading h3">{{ title }}</h2>
                      </div>

                      <div class="card__section {% if block.settings.display_mode == 'view_more' %}expandable-content{% endif %}" {% if block.settings.display_mode == 'view_more' %}aria-expanded="false"{% endif %}>
                        <div class="rte text--pull">
                          {{ liquid }}
                        </div>

                        {%- if block.settings.display_mode == 'view_more' -%}
                          <button class="expandable-content__toggle">
                            <span class="expandable-content__toggle-icon"></span>
                            <span class="expandable-content__toggle-text" data-view-more="{{ 'product.general.view_more' | t | escape }}" data-view-less="{{ 'product.general.view_less' | t | escape }}">{{- 'product.general.view_more' | t -}}</span>
                          </button>
                        {%- endif -%}
                      </div>
                    {%- endif -%}
                  </div>
                </div>
              {%- endif -%}

              {%- comment -%}
              --------------------------------------------------------------------------------------
              COMPLEMENTARY PRODUCTS
              --------------------------------------------------------------------------------------
              {%- endcomment -%}
              {%- when 'complementary_products' -%}
                <product-recommendations class="product-block-list__item product-block-list__item--complementary" intent="complementary" product="{{ product.id }}" limit="{{ block.settings.products_count }}" section-id="{{ section.id }}" {{ block.shopify_attributes }}>
                  {%- if recommendations.performed and recommendations.products_count > 0 -%}
                    <div class="card">
                      <div class="card__header">
                        <h2 class="card__title heading h3">{{ block.settings.title | escape }}</h2>
                      </div>

                      <div class="card__section">
                        <div class="complementary-product-list">
                          {%- for product in recommendations.products -%}


                            {%- render 'product-item', product: product, horizontal: true, hide_labels: true, show_add_to_cart: block.settings.show_quick_buy, complementary_products: true -%}
                          {%- endfor -%}
                        </div>
                      </div>
                    </div>
                  {%- endif -%}
                </product-recommendations>

              {%- comment -%}
              --------------------------------------------------------------------------------------
              REVIEWS
              --------------------------------------------------------------------------------------
              {%- endcomment -%}
              {%- when 'reviews' -%}
                <div class="product-block-list__item product-block-list__item--reviews" {{ block.shopify_attributes }}>
                  <span id="product-reviews" class="anchor"></span>

                  <div class="card">
                    <div class="card__section">
                      {%- assign reviews_count = product.metafields.spr.reviews | split: '<meta itemprop="reviewCount" content="' | last | split: '">' | first | times: 1 -%}
                      <div id="shopify-product-reviews" class="spr-reviews {% if reviews_count > 0 %}spr-reviews--has-reviews{% endif %}" data-id="{{ product.id }}">{{ product.metafields.spr.reviews }}</div>
                    </div>
                  </div>
                </div>

              {%- comment -%}
              --------------------------------------------------------------------------------------
              TRUST BADGE
              --------------------------------------------------------------------------------------
              {%- endcomment -%}

              {%- when 'trust' -%}
                {%- if block.settings.show_payment_icons and shop.enabled_payment_types.size > 0 -%}
                  {%- assign show_payment_icons = true -%}
                {%- else -%}
                  {%- assign show_payment_icons = false -%}
                {%- endif -%}

                {%- if block.settings.custom_security_badge or show_payment_icons -%}
                  <div class="product-block-list__item product-block-list__item--trust">
                    <div class="card">
                      <div class="card__header card__header--flex">
                        <h2 class="card__title heading h3">{{ block.settings.trust_title | escape }}</h2>

                        {%- render 'icon', icon: 'lock', width: 22, height: 24 -%}
                      </div>

                      <div class="card__section">
                        {%- if show_payment_icons -%}
                          {%- if block.settings.custom_security_badge -%}
                            <p class="card__subtitle heading h6">{{ 'product.general.payment' | t }}</p>
                          {%- endif -%}

                          <div class="payment-list">
                            {% for type in shop.enabled_payment_types %}

                              {{ type | payment_type_svg_tag: class: 'payment-list__item' }}
                            {% endfor %}
                          </div>

                          <p class="payment-list__notice">{{ 'product.general.payment_notice' | t }}</p>
                        {%- endif -%}

                        {%- if show_payment_icons and block.settings.custom_security_badge -%}
                          <hr class="card__separator">
                        {%- endif -%}

                        {%- if block.settings.custom_security_badge -%}
                          {%- if show_payment_icons -%}
                            <p class="card__subtitle heading h6">{{ 'product.general.security' | t }}</p>
                          {%- endif -%}

                          {%- assign badge_width = block.settings.custom_security_badge.width | at_most: 450 | append: 'x' -%}
                          <img class="product__trust-badge" style="width: {{ block.settings.custom_security_badge_width }}px"
                               loading="lazy"
                               src="{{ block.settings.custom_security_badge | img_url: badge_width }}"
                               srcset="{{ block.settings.custom_security_badge | img_url: badge_width }} 1x, {{ block.settings.custom_security_badge | img_url: badge_width, scale: 2 }} 2x"
                               alt="{{ block.settings.custom_security_badge.alt | escape }}">
                        {%- endif -%}
                      </div>
                    </div>
                  </div>
                {%- endif -%}

              {%- comment -%}
              --------------------------------------------------------------------------------------
              ESTIMATE SHIPPING
              --------------------------------------------------------------------------------------
              {%- endcomment -%}

              {%- when 'shipping_estimator' -%}
                {%- if product.available -%}
                  <div class="product-block-list__item product-block-list__item--shipping" {{ block.shopify_attributes }}>
                    <div class="card">
                      <div class="card__header">
                        <h2 class="card__title heading h3">{{ 'product.general.estimate_shipping' | t }}</h2>
                      </div>

                      <div class="card__section">
                        <div class="shipping-estimator form" role="form">
                          <div class="form__input-row">
                            <div class="form__input-wrapper">
                              <label for="shipping-estimator-country" class="form__label">{{ 'cart.shipping_estimator.country' | t }}</label>

                              <div class="select-wrapper select-wrapper--primary">
                                {%- render 'icon', icon: 'arrow-bottom' -%}

                                <select name="country" id="shipping-estimator-country" data-default="{{ customer.default_address.country | default: block.settings.shipping_estimator_default_country }}" required>
                                  {{- country_option_tags -}}
                                </select>
                              </div>
                            </div>

                            <div class="form__input-wrapper" style="display: none">
                              <label for="shipping-estimator-province" class="form__label">{{ 'cart.shipping_estimator.province' | t }}</label>

                              <div class="select-wrapper select-wrapper--primary">
                                {%- render 'icon', icon: 'arrow-bottom' -%}

                                <select name="province" id="shipping-estimator-province" data-default="{{ customer.default_address.province }}"></select>
                              </div>
                            </div>

                            <div class="form__input-wrapper" style="max-width: 155px">
                              <label for="shipping-estimator-zip" class="form__label">{{ 'cart.shipping_estimator.zip_code' | t }}</label>
                              <input type="text" name="zip" id="shipping-estimator-zip" class="form__field form__field--text" value="{{ customer.default.address.zip }}" required>
                            </div>
                          </div>

                          <button type="button" class="form__submit button button--primary" data-action="estimate-shipping">{{ 'cart.shipping_estimator.estimate' | t }}</button>

                          <div class="shipping-estimator__results rte" style="display: none;"></div>
                        </div>
                      </div>

                      {%- if block.settings.show_refunds_policy and shop.refund_policy != blank -%}
                        <div class="card__section card__section--tight">
                          <button class="product__refund-policy-link link link--accented" data-action="open-modal" aria-controls="modal-refunds-policy">{{ 'product.general.refund_policy' | t }} {%- render 'icon', icon: 'arrow-right' -%}</button>
                        </div>
                      {%- endif -%}
                    </div>

                    {%- if block.settings.show_refunds_policy and shop.refund_policy != blank -%}
                      <div id="modal-refunds-policy" class="modal" aria-hidden="true">
                        <div class="modal__dialog" role="dialog">
                          <header class="modal__header">
                            <h3 class="modal__title heading h2">{{ 'product.general.refund_policy' | t }}</h3>
                            <button class="modal__close link" data-action="close-modal" title="{{ 'general.accessibility.close' | t | escape }}">
                              {%- render 'icon', icon: 'close' -%}
                            </button>
                          </header>

                          <div class="modal__content">
                            <div class="rte">
                              {{ shop.refund_policy }}
                            </div>
                          </div>
                        </div>
                      </div>
                    {%- endif -%}
                  </div>
                {%- endif -%}
            {%- endcase -%}
          {%- endfor -%}
        </div>
      </div>
    </div>
  {%- else -%}
    {%- comment -%}We display the quick view within the product template so we can re-use the same settings{%- endcomment -%}
    <div class="featured-product">
      {%- render 'product-gallery-vertical' -%}
      {%- render 'product-info-new' -%}
    </div>
  {%- endif -%}
</section>

<style>
  .product-form__info-list{
    display:block !important;
  }
  .product-form__info-list tbody tr {
    border-top: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
}
  .product-form__info-list table {
    width: 100% !important;
}
  @media screen and (min-width: 641px) {
    .card {
        border: none;
    }
      .product-block-list{
    background:#ffffff;
    padding: 25px 30px;
  }
  }
  .product-block-list{
    background:#ffffff;
    padding: 25px 18px;
  }
  .card__separator{
    border:none;
  }
  .product-meta__title{
    font-weight:bold;
    margin-top:20px;
  }
</style>
<script>
document.addEventListener("DOMContentLoaded", function() {
  setTimeout(function() {
    // Find the parent container with class 'recently-viewed-products-placeholder'
    var parentContainer = document.querySelector('.recently-viewed-products-placeholder');

    if (parentContainer) {
      // Find all elements with 'data-radio-onetime' within the parent container
      var radioButtons = parentContainer.querySelectorAll('[data-radio-onetime]');

      // Loop through each radio button and click it
      radioButtons.forEach(function(radioButton) {
        radioButton.click();
        console.log('Clicked:', radioButton);
      });
    } else {
      console.log("Parent container 'recently-viewed-products-placeholder' not found.");
    }
  }, 5000); // Delay of 5000ms before the whole process runs
});



</script>
<style>
  .recently-viewed-products-placeholder{
    background:#e4e7ff !important;
  }
  @media screen and (min-width: 641px) {
    .product-list{
    background:none !important;
  }
  .product-item{
    background:none !important;
  }
    
}
  .product-list{
    background:none !important;
  }
  .product-item{
    background:none !important;
  }
  .product-item__action-list.button-stack>.rc-container-wrapper{
    display:none !important;
  }
  .aspect-ratio--square>img{
    border-radius:25px;
  }
  .aspect-ratio{
    border-radius:25px;
    background:#ffffff;
  }
  button.swym-button.swym-add-to-wishlist-view-product.swym-inject {
    top: 5% !important;
    right: 10% !important;
  }
  #shopify-section-template--18441537224959__recently-viewed-products{
    background: #E4E7FF;
    padding-top: 50px;
    padding-bottom: 40px;
    border-bottom:1px solid var(--border-color);
  }
  #shopify-section-template--18441537224959__product-recommendations{
    background: #E4E7FF;
    padding-top: 50px;
    padding-bottom: 40px;
    margin-bottom:20px;
  }
  h2.section__title.heading.h3{
    text-align:center;
    font-weight:bold;
    margin: 0 auto;
    margin-bottom:15px;
    color: #3a3b3d;
  }
  .product-item__title.text--strong.link{
    color: #3a3b3d;
  }
  @media screen and (min-width: 1000px) {
    .product-list:before {
        border: none !important;
    }
    .product-item__label-list {
        top:6%;
    }
}
  .product-item:after {
    box-shadow:none !important;
}
</style>
<script>
document.addEventListener("DOMContentLoaded", function() {
  // Set the product short description from the metafield as a JavaScript variable
  var productShortDescription = {{ product.metafields.custom.product_short_description }};

  // Check if the description is valid JSON or rich text
  if (productShortDescription && typeof productShortDescription === "object") {
    try {
      // Function to convert the rich text JSON to HTML
      function parseContent(content) {
        let html = '';
        content.children.forEach(function(item) {
          if (item.type === 'heading') {
            html += `<h${item.level}>${item.children[0].value}</h${item.level}>`;
          } else if (item.type === 'paragraph') {
            html += '<p>';
            item.children.forEach(function(child) {
              if (child.type === 'text') {
                html += child.bold ? `<strong>${child.value}</strong>` : child.value;
              } else if (child.type === 'link') {
                html += `<a href="${child.url}">${child.children[0].value}</a>`;
              }
            });
            html += '</p>';
          } else if (item.type === 'list') {  // Handle lists (unordered or ordered)
            const tag = item.listType === 'unordered' ? 'ul' : 'ol';
            html += `<${tag}>`;
            item.children.forEach(function(listItem) {
              html += '<li>';
              listItem.children.forEach(function(listChild) {
                if (listChild.type === 'text') {
                  html += listChild.bold ? `<strong>${listChild.value}</strong>` : listChild.value;
                }
              });
              html += '</li>';
            });
            html += `</${tag}>`;
          }
        });
        return html;
      }

      // Find all elements with the class 'product-form__info-item'
      var infoItems = document.querySelectorAll('.product-form__info-item');

      // Check if there are at least two 'product-form__info-item' elements
      if (infoItems.length >= 2) {
        // Create a new div for the product description
        var descriptionDiv = document.createElement('div');
        descriptionDiv.innerHTML = parseContent(productShortDescription);
        descriptionDiv.classList.add('rte'); // Add custom class if needed
        descriptionDiv.classList.add('product-description'); // Add custom class if needed

        // Insert the parsed product description between the two info-item divs
        infoItems[0].parentNode.insertBefore(descriptionDiv, infoItems[1]);

        console.log('Product short description successfully inserted between the info items.');
      } else {
        console.log('Not enough info items to insert the description.');
      }

    } catch (e) {
      console.error("Failed to parse product short description JSON:", e);
    }
  } else {
    console.log('Product short description is not valid or empty.');
  }
});

</script>



<script>
  window.ShopifyXR=window.ShopifyXR||function(){(ShopifyXR.q=ShopifyXR.q||[]).push(arguments)};
  ShopifyXR('addModels', {{ product.media | where: 'media_type', 'model' | json }});

  // We save the ID of the product in the local storage, as it can be used by the "recently viewed products" section
  (() => {
    let items = JSON.parse(localStorage.getItem('recentlyViewedProducts') || '[]');

    // If the product already exists we first remove it
    if (items.includes({{product.id | json}})) {
      items.splice(items.indexOf({{ product.id | json }}), 1);
    }

    items.unshift({{ product.id | json }});

    // Then, we save the current product into the local storage, by keeping only the 18 most recent
    try {
      localStorage.setItem('recentlyViewedProducts', JSON.stringify(items.slice(0, 18)));
    } catch (error) {
      // Do nothing, this may happen in Safari in incognito mode
    }
  })();
</script>
          
  <style>
      .product-form__payment-container>.product-form__add-button{
        width: 100% !important;
    border-radius: 50px !important;
  }
  @media screen and (min-width: 641px) {
    .product-form__payment-container>.product-form__add-button {
        width: 100% !important;
    border-radius: 50px !important;
    }
}
    .quantity-selector.quantity-selector--product{
      border-radius: 50px !important;
    }
        .product-form__payment-container {
          width:100%
        }
  </style>
  <script>
    
    //add cart to button
document.addEventListener("DOMContentLoaded", function() {
  // Find the payment list element
  var paymentList = document.querySelector('.payment-list');
    // Select the button using its classes
    var addButton = document.querySelector('.product-form__add-button.button.button--primary');

    if (addButton) {
        // Create a span element to hold the cart icon
        var cartIcon = document.createElement('span');
        cartIcon.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="24" height="24" style="fill: white; vertical-align: middle; margin-left: 5px;margin-top: -3px;">
                <path d="M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"/>
            </svg>
        `; // SVG icon with white fill

        // Append the cart icon to the button's text
        addButton.appendChild(cartIcon);
    } else {
        console.log("Add to Cart button not found.");
    }
  if (paymentList && addButton) {
    // Clone the payment list
    var clonedPaymentList = paymentList.cloneNode(true);

    // Remove specific elements by ID
      var idsToRemove = ['pi-venmo', 'pi-metapay', 'pi-paypal', 'pi-amazon'];

      for (var i = 0; i < idsToRemove.length; i++) {
        var element = clonedPaymentList.querySelector('#' + idsToRemove[i]);

        if (element && element.parentElement) {
          element.parentElement.remove();
        }
      }
    
    // Create a new div to wrap the cloned payment list
    var wrapperDiv = document.createElement('div');
    wrapperDiv.style.display = 'flex'; // Use flex display to center the content
    wrapperDiv.style.justifyContent = 'center'; // Center items horizontally
    wrapperDiv.style.width = '100%'; // Set width to 100%
    wrapperDiv.style.marginBottom = '25px'; // Set space bottom
    wrapperDiv.style.marginTop = '15px'; // Set space top
    
    // Append the cloned payment list to the wrapper div
    wrapperDiv.appendChild(clonedPaymentList);
    
    // Insert the wrapper div just below the button
    addButton.insertAdjacentElement('afterend', wrapperDiv);
    console.log("Payment list copied below the add button and centered.");
  } else {
    console.log("Payment list or add button not found.");
  }
});



  </script>
  
  <script>
    //wishlist fix, move location and adjust functionality
document.addEventListener("DOMContentLoaded", function() {
  let retryCount = 0; // To keep track of retries

  function checkAndCloneWishlistButton() {
    // Check for the wishlist button element to clone
    var wishlistButton = document.querySelector('.swym-button-bar.swym-wishlist-button-bar.swym-inject');
    
    // Check for the target element where the clone will be placed
    var targetDiv = document.querySelector('.product-form__info-item.product-form__info-item--quantity');

    // Check for the specific button to click when the clone is clicked
    var addToWishlistButton = document.querySelector('.swym-button.swym-add-to-wishlist.swym-inject.swym-has-fave-count.swym-icon.swym-heart.swym-loaded');

    // Check for the span that holds the wishlist count in the original
    var originalWishlistCount = document.querySelector('.swym-fave-count');

    if (wishlistButton && targetDiv && addToWishlistButton && originalWishlistCount) {
      // Clone the wishlist button
      var clonedWishlistButton = wishlistButton.cloneNode(true);
      
      // Append the cloned wishlist button inside the target div
      targetDiv.appendChild(clonedWishlistButton);

      // Hide the original wishlist button
      wishlistButton.style.display = 'none';

      // Add display:flex to the .swym-btn-container.swym-inject within the clone
      var clonedButtonContainer = clonedWishlistButton.querySelector('.swym-btn-container.swym-inject');
      if (clonedButtonContainer) {
        clonedButtonContainer.style.display = 'flex';
      }

      // Add event listener to the clone to click the specific wishlist button
      clonedWishlistButton.addEventListener('click', function() {
        addToWishlistButton.click();

        // After clicking, update the cloned count to match the original
        setTimeout(function() {
          var updatedCount = originalWishlistCount.getAttribute('data-count');
          var clonedWishlistCount = clonedWishlistButton.querySelector('.swym-fave-count');

          if (clonedWishlistCount && updatedCount !== null) {
            clonedWishlistCount.setAttribute('data-count', updatedCount);
            clonedWishlistCount.textContent = updatedCount;
            console.log("Wishlist count updated in clone: " + updatedCount);
          }
        }, 400); // Delay to allow the count to update after click
      });

      console.log("Wishlist button cloned and hidden, clone will trigger the 'add to wishlist' button.");
    } else {
      retryCount++;
      console.log("Wishlist button, target div, or 'add to wishlist' button not found. Retrying... Attempt: " + retryCount);

      if (retryCount < 3) { // Limit retries to 2
        setTimeout(checkAndCloneWishlistButton, 1000); // Retry after 1 second if elements are not found
      } else {
        console.log("Maximum retries reached. Stopping further attempts.");
      }
    }
  }

  // Initial call to the function with a delay
  setTimeout(checkAndCloneWishlistButton, 1000); // Start after 1 second
});



  </script>

  <script>
    //icons banner FIX (remove global banner in favor of embeded)
    document.addEventListener("DOMContentLoaded", function() {
  // Locate the element by its data-banners attribute
  var bannersElement = document.querySelector('[data-banners]');

  

  if (bannersElement) {
    // Find the other banners element
    var clonedBannersElement = bannersElement.cloneNode(true);
    
    // Set the cloned element to display as block
    bannersElement.style.display = 'none';
    
    
    console.log("Banners element cloned and appended to the product form.");
  } else {
    console.log("Banners element or product form not found.");
  }
});

  </script>
<style>
  .rc-radio {
    border: 3px solid #e91a90;
    border-radius: 25px;
    margin: 10px 0px !important;
}
  .rc-selling-plans{
    background:none !important;
    margin-top:8px;
  }
  .rc-selling-plans-dropdown__select{
    border-radius:25px;
  }
</style>

  {%- comment -%} Fix to exclude business customers from subscriptions {%- endcomment -%}
{%- if customer.tags contains 'business account' -%}
  <!-- Content to render if the customer IS a business account -->
  <script>
document.addEventListener("DOMContentLoaded", function() {
  // Find the parent element by ID
  var rechargeWidget = document.getElementById('shopify-block-recharge_subscriptions_subscription_widget_v2_Lxa7WE');
  function checkForPurchaseOption() {
    var subscriptionWidget = document.querySelector('recharge-subscription-widget');

    if (subscriptionWidget) {
      var shadowRoot = subscriptionWidget.shadowRoot;

      if (shadowRoot) {
        // Target the input directly
        var purchaseInput = shadowRoot.querySelector('.rc-purchase-option__input[type="radio"][value="onetime"]');

        if (purchaseInput) {
          purchaseInput.click(); // Click the input element
          console.log("Purchase option input found and clicked.");
        } else {
          console.log("Radio input for purchase option not found inside Shadow DOM.");
        }
      } else {
        console.log("Shadow root not found.");
      }
    } else {
      console.log("Element 'recharge-subscription-widget' not found.");
    }
  }

  // Call the function with a delay
  setTimeout(checkForPurchaseOption, 500); // Check after 500ms
  if (rechargeWidget) {
      rechargeWidget.style.display = 'none'; // Hide the element
      console.log("Recharge widget hidden.");
    } else {
      console.log("Recharge widget not found.");
    }
});


</script>

{%- else -%}
  <!-- Content to render if the customer is NOT a business account -->

{%- endif -%}



{% schema %}
{
  "name": "Product",
  "blocks": [
    {
      "type": "product_meta",
      "name": "Product meta",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_vendor",
          "label": "Show vendor",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_sku",
          "label": "Show SKU",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_reviews_badge",
          "label": "Show product rating",
          "info": "To display a rating, add a product rating app. [Learn more](https://help.shopify.com/en/manual/products/product-reviews/installation)",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_share_buttons",
          "label": "Show share buttons",
          "default": true
        }
      ]
    },
    {
      "type": "variant_selector",
      "name": "Variant selector",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "selector_mode",
          "label": "Selector type",
          "options": [
            {
              "value": "block",
              "label": "Block"
            },
            {
              "value": "dropdown",
              "label": "Dropdown"
            }
          ],
          "default": "block"
        },
        {
          "type": "select",
          "id": "color_mode",
          "label": "Color selector type",
          "info": "Variant image mode requires that all variant has an associated image. [Learn more](https://help.shopify.com/en/manual/products/product-variant-images#add-images-to-existing-variants)",
          "options": [
            {
              "value": "block",
              "label": "Block"
            },
            {
              "value": "dropdown",
              "label": "Dropdown"
            },
            {
              "value": "color",
              "label": "Color swatch"
            },
            {
              "value": "variant_image",
              "label": "Variant image"
            }
          ],
          "default": "color"
        },
        {
          "type": "checkbox",
          "id": "show_quantity_selector",
          "label": "Show quantity selector",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_taxes_included",
          "label": "Show price taxes notice",
          "default": false
        },
        {
          "type": "header",
          "content": "Inventory"
        },
        {
          "type": "paragraph",
          "content": "You can also add a stock countdown. [Learn more](https://support.maestrooo.com/article/177-product-show-an-stock-countdown-bar)."
        },
        {
          "type": "checkbox",
          "id": "show_inventory_quantity",
          "label": "Show inventory quantity",
          "default": false
        },
        {
          "type": "range",
          "id": "low_inventory_threshold",
          "label": "Low inventory threshold",
          "info": "Use low stock color when quantity is below the threshold. Choose 0 to always show in stock.",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 0
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "Buy buttons",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_payment_button",
          "label": "Show dynamic checkout button",
          "info": "Each customer will see their preferred payment method from those available on your store, such as PayPal or Apple Pay. [Learn more](https://help.shopify.com/manual/using-themes/change-the-layout/dynamic-checkout)",
          "default": true
        },
        {
          "type": "checkbox",
          "id": "show_gift_card_recipient",
          "label": "Show recipient information form for gift card products",
          "info": "Gift card products can optionally be sent directly to a recipient along with a personal message. [Learn more](https://help.shopify.com/manual/online-store/themes/customizing-themes/add-gift-card-recipient-fields)",
          "default": false
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "paragraph",
          "content": "This text will appear on the right part of the page."
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Text"
        }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": [
        {
          "type": "paragraph",
          "content": "This button will appear on the right part of the page."
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "store_pickup",
      "name": "Local pickup availability",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "Show customers where they can pick up the product. [Learn more](https://help.shopify.com/en/manual/shipping/setting-up-and-managing-your-shipping/local-methods/local-pickup#show-pickup-availability-to-your-customers)"
        }
      ]
    },
    {
      "type": "description",
      "name": "Description",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "display_mode",
          "label": "Display mode",
          "options": [
            {
              "value": "collapse",
              "label": "Collapse"
            },
            {
              "value": "view_more",
              "label": "Show view more if long"
            },
            {
              "value": "show_all",
              "label": "Show all"
            }
          ],
          "default": "show_all"
        }
      ]
    },
    {
      "type": "content",
      "name": "Content",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content"
        },
        {
          "type": "page",
          "id": "page",
          "label": "Content from page",
          "info": "If specified, takes precedence over inline content."
        },
        {
          "type": "select",
          "id": "display_mode",
          "label": "Display mode",
          "options": [
            {
              "value": "collapse",
              "label": "Collapse"
            },
            {
              "value": "view_more",
              "label": "Show view more if long"
            },
            {
              "value": "show_all",
              "label": "Show all"
            }
          ],
          "default": "show_all"
        }
      ]
    },
    {
      "type": "liquid",
      "name": "Liquid",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "liquid",
          "id": "liquid",
          "label": "Liquid code",
          "default": "{{ product.title }}"
        },
        {
          "type": "select",
          "id": "display_mode",
          "label": "Display mode",
          "options": [
            {
              "value": "collapse",
              "label": "Collapse"
            },
            {
              "value": "view_more",
              "label": "Show view more if long"
            },
            {
              "value": "show_all",
              "label": "Show all"
            }
          ],
          "default": "show_all"
        }
      ]
    },
    {
      "type": "complementary_products",
      "name": "Complementary products",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "To select complementary products, use the Search & Discovery app. [Learn more](https://help.shopify.com/en/manual/online-store/search-and-discovery/product-recommendations#complementary-products)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Pairs well with"
        },
        {
          "type": "range",
          "id": "products_count",
          "min": 1,
          "max": 10,
          "label": "Products count",
          "default": 10
        },
        {
          "type": "checkbox",
          "id": "show_quick_buy",
          "label": "Show quick buy",
          "default": true
        }
      ]
    },
    {
      "type": "reviews",
      "name": "Reviews",
      "limit": 1,
      "settings": [
        {
          "type": "paragraph",
          "content": "You need to install [Shopify's free Product Reviews](https://apps.shopify.com/product-reviews) app before enabling those options."
        }
      ]
    },
    {
      "type": "shipping_estimator",
      "name": "Shipping estimator",
      "settings": [
        {
          "type": "text",
          "id": "shipping_estimator_default_country",
          "label": "Default country",
          "info": "If the customer is logged in, the country of their shipping address will be used.",
          "default": "United States"
        },
        {
          "type": "checkbox",
          "id": "show_refunds_policy",
          "label": "Show refunds policy",
          "info": "Refund policy must be added into your store policies. [Learn more](https://help.shopify.com/manual/sell-online/checkout-settings/refund-privacy-tos).",
          "default": true
        }
      ]
    },
    {
      "type": "trust",
      "name": "Trust content",
      "settings": [
        {
          "type": "text",
          "id": "trust_title",
          "label": "Heading",
          "default": "Payment & Security"
        },
        {
          "type": "checkbox",
          "id": "show_payment_icons",
          "label": "Show payment icons",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "custom_security_badge",
          "label": "Security badge",
          "info": "800 x 200px .jpg recommended"
        },
        {
          "type": "range",
          "id": "custom_security_badge_width",
          "min": 100,
          "max": 500,
          "step": 10,
          "unit": "px",
          "label": "Security badge width",
          "default": 200
        }
      ]
    },
    {
      "type": "@app"
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Media"
    },
    {
      "type": "paragraph",
      "content": "Learn more about [media types](https://help.shopify.com/en/manual/products/product-media)"
    },
    {
      "type": "select",
      "id": "image_size",
      "label": "Size",
      "options": [
        {
          "value": "small",
          "label": "Small"
        },
        {
          "value": "medium",
          "label": "Medium"
        },
        {
          "value": "large",
          "label": "Large"
        }
      ],
      "default": "small"
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "label": "Enable video looping",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_image_zoom",
      "label": "Enable image zoom",
      "default": true
    },
    {
      "type": "select",
      "id": "zoom_effect",
      "label": "Desktop zoom effect",
      "options": [
        {
          "value": "inside",
          "label": "Inside"
        },
        {
          "value": "outside",
          "label": "Outside"
        }
      ],
      "default": "outside"
    },
    {
      "type": "select",
      "id": "carousel_effect",
      "label": "Transition effect",
      "options": [
        {
          "value": "fade",
          "label": "Fade"
        },
        {
          "value": "slide",
          "label": "Slide"
        }
      ],
      "default": "fade"
    }
  ]
}
{% endschema %}